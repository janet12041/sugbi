{"version":3,"sources":["sugbi/events.cljs"],"mappings":";AASA,yDAAA,zDAACA,kIAEC,cAAAC,HAAKG;AAAL,AAAA,IAAAF,aAAAD;QAAA,AAAAE,4CAAAD,WAAA,IAAA,/DAASG;YAAT,AAAAF,4CAAAD,WAAA,IAAA,nEAAWI;AAAX,AACE,IAAMC,YAAU,AAAA,gGAAeH;IACzBI,YAAU,oDAAA,pDAACC,8CAAMH,0EACM,AAACI,8CAAsB,AAAA,kGAAcH,WAAWD;AAF7E,AAGE,wDAAA,jDAACG,8CAAML,qEAAiBI;;AAE9B,qBAAA,rBAACG,sGAEC,WAAAC;AAAA,AAAA,IAAAC,aAAAD;IAAAE,aAAA,AAAAC,cAAAF;IAAAG,eAAA,AAAAC,gBAAAH;IAAAA,iBAAA,AAAAI,eAAAJ;QAAAE,JAAMI;IAAND,aAAAL;aAAA,AAAAX,4CAAAgB,WAAA,IAAA,pEAAWE;YAAX,AAAAlB,4CAAAgB,WAAA,IAAA,nEAAkBG;AAAlB,AACE,OAACC,8DAAeH,EAAEC,OAAOC;;AAE7B,yDAAA,zDAACE,mIAEC,aAAAC,FAAKpB;AAAL,AAAA,IAAAqB,aAAAD;YAAA,AAAAtB,4CAAAuB,WAAA,IAAA,nEAAQrB;cAAR,AAAAF,4CAAAuB,WAAA,IAAA,rEAAUC;aAAV,AAAAxB,4CAAAuB,WAAA,IAAA,pEAAkBL;YAAlB,AAAAlB,4CAAAuB,WAAA,IAAA,nEAAyBJ;AAAzB,AAAA,kDAAA,iFAAA,mFACyBK,QAAQN,OAAOC;;AAE1C,yDAAA,zDAACtB,qHAEC,cAAA4B,HAAKxB;AAAL,AAAA,IAAAyB,aAAAD;QAAA,AAAAzB,4CAAA0B,WAAA,IAAA,/DAASxB;WAAT,AAAAF,4CAAA0B,WAAA,IAAA,lEAAWC;AAAX,AACE,wDAAA,jDAACrB,8CAAML,yDAAS0B;;AAEpB,yDAAA,zDAACN,0HAEC,WAAKnB,EAAEA;AAAP,AAAA,kDAAA,iEAAA,2CAAA,uDAAA,mDAAA,mDAAA,QAAA,oPAAA,iEAAA,mFAAA,7TAGiC,CAAC0B,8DAAAA,gEAAAA;;AAGpC,yDAAA,zDAAC/B,oIAEC,cAAAgC,HAAK5B;AAAL,AAAA,IAAA6B,aAAAD;QAAA,AAAA7B,4CAAA8B,WAAA,IAAA,/DAAS5B;YAAT,AAAAF,4CAAA8B,WAAA,IAAA,nEAAWC;AAAX,AACE,wDAAA,jDAACzB,8CAAML,sEAAiB8B;;AAE5B,yDAAA,zDAACV,+HAEC,WAAKnB,EAAEA;AAAP,AAAA,kDAAA,6DAAA,mFAAA;;AAKF,2DAAA,3DAAC8B,+KAEC,WAAK/B,GAAGC;AAAR,AACE,OAAA,gGAAID;;AAER,2DAAA,yHAAA,gDAAA,mFAAA,vTAAC+B,iYAGC,WAAKC,MAAM/B;AAAX,AACE,OAAA,mFAAA,AAAA,mFAAI+B;;AAER,2DAAA,mHAAA,gDAAA,mFAAA,jTAACD,2XAGC,WAAKC,MAAM/B;AAAX,AACE,OAAA,mFAAA,AAAA,mFAAI+B;;AAER,2DAAA,3DAACD,mKAEC,WAAK/B,GAAGC;AAAR,AACE,OAAA,oFAAOD;;AAEX,2DAAA,3DAAC+B,gLAEC,WAAK/B,GAAGC;AAAR,AACE,OAAA,iGAAeD","names":["re_frame.core.reg_event_db","p__60175","vec__60176","cljs.core.nth","db","_","match","old-match","new-match","cljs.core.assoc","reitit.frontend.controllers/apply-controllers","re-frame.core/reg-fx","p__60180","vec__60181","seq__60182","cljs.core/seq","first__60183","cljs.core/first","cljs.core/next","vec__60184","k","params","query","reitit.frontend.easy.push_state","re_frame.core.reg_event_fx","p__60187","vec__60188","url-key","p__60191","vec__60192","docs","ajax.core/raw-response-format","p__60195","vec__60196","error","re_frame.core.reg_sub","route"],"sourcesContent":["(ns sugbi.events\n  (:require\n    [re-frame.core :as rf]\n    [ajax.core :as ajax]\n    [reitit.frontend.easy :as rfe]\n    [reitit.frontend.controllers :as rfc]))\n\n;;dispatchers\n\n(rf/reg-event-db\n  :common/navigate\n  (fn [db [_ match]]\n    (let [old-match (:common/route db)\n          new-match (assoc match :controllers\n                                 (rfc/apply-controllers (:controllers old-match) match))]\n      (assoc db :common/route new-match))))\n\n(rf/reg-fx\n  :common/navigate-fx!\n  (fn [[k & [params query]]]\n    (rfe/push-state k params query)))\n\n(rf/reg-event-fx\n  :common/navigate!\n  (fn [_ [_ url-key params query]]\n    {:common/navigate-fx! [url-key params query]}))\n\n(rf/reg-event-db\n  :set-docs\n  (fn [db [_ docs]]\n    (assoc db :docs docs)))\n\n(rf/reg-event-fx\n  :fetch-docs\n  (fn [_ _]\n    {:http-xhrio {:method          :get\n                  :uri             \"/docs\"\n                  :response-format (ajax/raw-response-format)\n                  :on-success       [:set-docs]}}))\n\n(rf/reg-event-db\n  :common/set-error\n  (fn [db [_ error]]\n    (assoc db :common/error error)))\n\n(rf/reg-event-fx\n  :page/init-home\n  (fn [_ _]\n    {:dispatch [:fetch-docs]}))\n\n;;subscriptions\n\n(rf/reg-sub\n  :common/route\n  (fn [db _]\n    (-> db :common/route)))\n\n(rf/reg-sub\n  :common/page-id\n  :<- [:common/route]\n  (fn [route _]\n    (-> route :data :name)))\n\n(rf/reg-sub\n  :common/page\n  :<- [:common/route]\n  (fn [route _]\n    (-> route :data :view)))\n\n(rf/reg-sub\n  :docs\n  (fn [db _]\n    (:docs db)))\n\n(rf/reg-sub\n  :common/error\n  (fn [db _]\n    (:common/error db)))\n"]}