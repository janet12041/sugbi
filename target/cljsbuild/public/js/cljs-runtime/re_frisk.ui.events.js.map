{"version":3,"sources":["re_frisk/ui/events.cljs"],"mappings":"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","names":["re-frisk.ui.events/event-item","_","tool-state","checkbox-trace-val","p__73738","map__73739","cljs.core/--destructure-map","cljs.core.get","color","name","app-db-diff","selected?","op-type","indx","search-filter","item","cljs.core.merge","cljs.core/not","clojure.string/blank?","and__5043__auto__","re-frisk.utils/get-from-diff","re-frisk.filter.filter-parser/parse","event","cljs.core.swap_BANG_","cljs.core/assoc","re-frisk.utils/scroll-timeline-event-item","cljs.core/deref","re-frisk.ui.trace/trace-event-item","re-frisk.ui.events/event-list-item","p__73740","map__73741","trace?","cljs.core.not_EQ_","re-frisk.ui.trace/trace-item","re-frisk.ui.events/events-scroller","filtered-events","re_frisk.inlined_deps.reagent.v1v0v0.reagent.core.create_class","this","n","re-frisk.inlined-deps.reagent.v1v0v0.reagent.dom/dom-node","p1__73746#","re-frisk.ui.components.components/scroller","t","cljs.core._EQ_","iter__5523__auto__","s__73748","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__73750","cljs.core/chunk-buffer","i__73749","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__73747","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","re-frisk.ui.events/events-list-view","re-frame-data","truncate-checkbox-val","re_frisk.inlined_deps.reagent.v1v0v0.reagent.core.atom","text-val","max-text-val","re-frame-events","colored-and-selected","re-frisk.inlined-deps.reagent.v1v0v0.reagent.ratom/make-reaction","clrs","cljs.core.doall","p1__73754#","cljs.core.map","cljs.core.assoc","cljs.core.get_in","traces-filtered-events","cljs.core.remove","max-traces-filtered-events","cljs.core/take-last","cljs.core.filter","re-frisk.utils/filter-event","sorted-events","cljs.core.sort_by","re-com.core/v-box","p1__73755#","re-com.core/h-box","re-com.core/box","cljs.core/reset!","re-frisk.ui.components.components/small-button","e","val","cljs.core/dissoc","p1__73756#","p1__73757#","p1__73758#","re-com.core/checkbox","re-com.core/gap","re-frisk.ui.events/event-bar","evnt-key","subs?","subs-graph-opened?","G__73788","fexpr__73787","re-com.core/label","re-frisk.ui.components.components/label-button","cljs.core/update","p1__73784#","cljs.core/assoc-in","re-frisk.ui.events/event-count","label","duration-ms","re-frisk.ui.events/event-content","state-atom","re-frisk.ui.components.frisk/expand-by-default","map__73799","handler-duration-ms","fx-duration-ms","effects","coeffects","re-frisk.ui.components.colors/render","re-frisk.ui.components.colors/effect","re-frisk.ui.components.frisk/Root","G__73804","re-frisk.ui.events/frisk-view","map__73805","re-frisk.ui.subs/event-subs-graph-container","re-frisk.ui.trace/subs-details","cljs.core/chunk-first"],"sourcesContent":["(ns re-frisk.ui.events\n  (:require-macros [re-frisk.inlined-deps.reagent.v1v0v0.reagent.ratom :refer [reaction]])\n  (:require\n   [re-frisk.inlined-deps.reagent.v1v0v0.reagent.core :as reagent]\n   [re-frisk.inlined-deps.reagent.v1v0v0.reagent.dom :as rdom]\n   [clojure.string :as string]\n   [re-com.core :as re-com]\n   [re-frisk.ui.components.frisk :as frisk]\n   [re-frisk.ui.components.components :as components]\n   [re-frisk.ui.trace :as trace]\n   [re-frisk.utils :as utils]\n   [re-frisk.ui.subs :as subs]\n   [re-frisk.ui.components.colors :as colors]\n   [re-frisk.filter.filter-parser :as filter-parser]))\n\n(defn event-item [_ tool-state checkbox-trace-val]\n  (fn [{:keys [color name app-db-diff selected? op-type indx search-filter] :as item} _]\n    [:a\n     {:href     \"#\"\n      :id       (str \"events-list-item\" indx)\n      :class    (str \"list-group-item\" (when selected? \" active\"))\n      :style    (merge {:padding     5 :font-size 13 :border-left-width 2\n                        :padding-right 0\n                        :white-space :pre :width \"100%\"}\n                       (when (and (nil? app-db-diff) (not selected?))\n                         {:opacity \"0.7\"})\n                       (when-not (string/blank? color)\n                         {:border-left-color (str \"#\" color)})\n                       (when (and (not (string/blank? search-filter))\n                                  (not (nil? app-db-diff))\n                                  (utils/get-from-diff app-db-diff (filter-parser/parse search-filter)))\n                         {:border-left-width 4\n                          :border-left-color \"#df691a\"}))\n      :on-click (fn [event]\n                  (swap! tool-state assoc :selected-event item)\n                  (utils/scroll-timeline-event-item (:doc @tool-state) indx)\n                  (.preventDefault event))}\n     (if (and op-type checkbox-trace-val)\n       [trace/trace-event-item item]\n       [:span name])]))\n\n(defn event-list-item [_ tool-state checkbox-trace-val]\n  (fn [{:keys [trace? op-type] :as item} _]\n    (if (and trace? (not= :event op-type))\n      [trace/trace-item item tool-state]\n      [event-item item tool-state checkbox-trace-val])))\n\n(defn events-scroller [filtered-events tool-state _]\n  (reagent/create-class\n   {:display-name \"re_frisk.debugger-messages\"\n    :component-did-update\n    (fn [this]\n      (let [n (rdom/dom-node this)]\n        (when (:scroll-bottom? @tool-state)\n          (set! (.-scrollTop n) (.-scrollHeight n)))))\n    :reagent-render\n    (fn [_ _ checkbox-trace-val]\n      [components/scroller\n       {:on-scroll #(let [t (.-target %)]\n                      (swap! tool-state assoc\n                             :scroll-bottom?\n                             (= (- (.-scrollHeight t) (.-offsetHeight t)) (.-scrollTop t))))}\n       (for [item @filtered-events]\n         ^{:key (str \"item\" (:indx item) checkbox-trace-val)}\n         [event-list-item item tool-state checkbox-trace-val])])}))\n\n(defn events-list-view [re-frame-data tool-state]\n  (let [truncate-checkbox-val (reagent/atom true)\n        checkbox-trace-val    (reagent/atom false)\n        text-val              (reagent/atom \"\")\n        max-text-val          (reagent/atom \"\")\n        re-frame-events       (:events re-frame-data)\n        colored-and-selected\n        (reaction\n         (let [clrs (:events-colors @tool-state)]\n           (doall\n            (map #(assoc % :selected? (= (get-in @tool-state [:selected-event :indx]) (:indx %))\n                           :name (if @truncate-checkbox-val (:truncated-name %) (str (first (:event %))))\n                           :search-filter (:search-diff-path @tool-state)\n                           :color (get clrs (first (:event %))))\n                 @re-frame-events))))\n        traces-filtered-events\n        (reaction\n         (if @checkbox-trace-val\n           @colored-and-selected\n           (remove :trace? @colored-and-selected)))\n        max-traces-filtered-events\n        (reaction\n         (if (> (int @max-text-val) 0)\n           (take-last (int @max-text-val) @traces-filtered-events)\n           @traces-filtered-events))\n        filtered-events\n        (reaction\n         (if (= @text-val \"\")\n           @max-traces-filtered-events\n           (filter (utils/filter-event @text-val) @max-traces-filtered-events)))\n        sorted-events\n        (reaction (sort-by :indx @filtered-events))]\n    (fn []\n      [re-com/v-box :size \"1\"\n       :children\n       [;events filter\n        (when (:events-opened? @tool-state)\n          [re-com/h-box\n           :children\n           [[re-com/box :size \"1\"\n             :child\n             [:input {:type \"text\"\n                      :style {:height :auto :padding \"0\" :width \"100%\"}\n                      :value @text-val\n                      :placeholder \"Filter events\"\n                      :on-change #(reset! text-val (-> % .-target .-value))}]]\n            [components/small-button {:on-click #(reset! text-val \"\") :active? false} \"X\"]]])\n        (when (:events-opened? @tool-state)\n          [re-com/h-box\n           :children\n           [[re-com/box :size \"1\"\n             :child\n             [:input {:type        \"text\"\n                      :style       {:height :auto :padding \"0\" :width \"100%\"}\n                      :value       (:search-diff-path @tool-state)\n                      :placeholder \"Search changes in db\"\n                      :on-change   (fn [e]\n                                     (let [val (-> e .-target .-value)]\n                                       (swap! tool-state assoc :search-diff-path val)\n                                       #_(utils/debounce\n                                          :filter-change 400\n                                          #(swap! tool-state assoc :search-diff-path val))))}]]\n            [components/small-button {:on-click #(swap! tool-state dissoc :search-diff-path) :active? false} \"X\"]]])\n        (when (:events-opened? @tool-state)\n          ;truncate checkbox\n          [re-com/h-box :gap \"5px\"\n           :children\n           [[re-com/checkbox\n             :model truncate-checkbox-val\n             :on-change #(reset! truncate-checkbox-val %)\n             :label \"truncate\"]\n            [re-com/checkbox\n             :model checkbox-trace-val\n             :on-change #(reset! checkbox-trace-val %)\n             :label \"traces\"]\n            [re-com/gap :size \"100%\"]\n            [re-com/h-box\n             :children\n             [[:input {:type \"text\"\n                       :style {:height \"20px\" :padding \"0\" :width \"30px\"}\n                       :value @max-text-val\n                       :placeholder \"max\"\n                       :on-change #(reset! max-text-val (-> % .-target .-value))}]\n              [components/small-button {:on-click #(reset! max-text-val nil) :active? false} \"X\"]]]]])\n        ;events\n        [events-scroller sorted-events tool-state @checkbox-trace-val]]])))\n\n(defn event-bar [tool-state]\n  (let [evnt-key (reaction (first (get-in @tool-state [:selected-event :event])))\n        subs?    (reaction (get-in @tool-state [:selected-event :subs?]))\n        subs-graph-opened?  (reaction (get @tool-state :subs-graph-opened?))\n        color    (reaction (if @evnt-key (@evnt-key (:events-colors @tool-state)) \"\"))]\n    (fn []\n      [re-com/h-box :align :center :style {:background-color \"#4e5d6c\"}\n       :children\n       [[re-com/label :style {:margin \"4px\"}\n         :label (cond @evnt-key \"Event\"\n                      @subs? \"Subscriptions\"\n                      :else \"Event / Trace\")]\n        (when @subs?\n          [components/label-button {:on-click #(swap! tool-state update :subs-graph-opened? not)\n                                    :active? @subs-graph-opened?}\n           \"Graph\"])\n        (when @evnt-key\n          [re-com/h-box\n           :children\n           [[re-com/label :label @evnt-key :style {:margin \"4px\"}]\n            [re-com/label :label \"#\" :style {:margin \"4px\"}]\n            [:input\n             {:style     {:width \"60px\"} :placeholder \"000000\" :type \"text\" :max-length \"6\"\n              :value     @color\n              :on-change #(swap! tool-state assoc-in\n                                 [:events-colors @evnt-key]\n                                 (-> % .-target .-value))}]]])]])))\n\n(defn event-count [label val color duration-ms]\n  [:div {:style {:display        :flex :align-items :center :margin-right 10\n                 :flex-direction :row}}\n   label \":\"\n   [:div {:style {:display :flex :align-items :center}}\n    (if (string/blank? val)\n      [:div {:style {:width 10}}]\n      [:div {:style {:display       :flex :margin 5 :padding-left 4 :padding-right 4 :background-color color\n                     :border-radius 4 :color :white}}\n       val])\n    duration-ms]])\n\n(defn event-content [_]\n  (let [state-atom (reagent/atom frisk/expand-by-default)]\n    (fn [item]\n      (let [{:keys [event app-db-diff trace? duration-ms handler-duration-ms\n                    fx-duration-ms effects coeffects]}\n            item]\n        [:div {:style {:display :flex :flex 1 :background-color \"#f3f3f3\" :color \"#444444\"\n                       :padding 8 :flex-direction :column}}\n         (when duration-ms\n           [:div {:style {:display :flex :flex-direction :row :align-items :center\n                          :margin-bottom 10 :border-bottom \"solid 1px #CCCCCC\"}}\n            [:div {:style {:margin-right 10}} \"Total time: \" duration-ms]\n            [:div {:style {:margin-right 10}} \" | \"]\n            [event-count \"Handler\" \"\" colors/render handler-duration-ms]\n            [:div {:style {:margin-right 10}} \" | \"]\n            [event-count \"Effects\" (count effects) colors/effect fx-duration-ms]])\n         [frisk/Root (if trace?\n                       item\n                       (merge {:event event}\n                              (if duration-ms\n                                {:effects (cond-> effects\n                                            app-db-diff\n                                            (assoc :db app-db-diff))\n                                 :coeffects coeffects}\n                                {:app-db-diff app-db-diff})))\n          0 state-atom]]))))\n\n(defn frisk-view [tool-state]\n  (let []\n    (fn [_]\n      (let [subs-graph-opened? (:subs-graph-opened? @tool-state)\n            {:keys [subs?] :as item}\n            (:selected-event @tool-state)]\n        (when item\n          (if subs?\n            (if subs-graph-opened?\n              [subs/event-subs-graph-container item]\n              [trace/subs-details item])\n            [event-content item]))))))"]}